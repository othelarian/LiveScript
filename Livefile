require! { fs, '.': {compile} }

task \live, '', !->
  require! { path }
  fs.readFileSync \./bin-src/live.ls, \utf-8
    |> compile _, bare: yes
    |> ('#!/usr/bin/env node\n\n' ++)
    |> fs.writeFileSync \./bin/live, _
  console.log 'live command (re)generated'

task \package, '', !->
  pkg = fs.readFileSync \./package.json.ls, \utf-8
    |> compile _, json: yes
    |> fs.writeFileSync \./package.json, _
  console.log 'package.json (re)generated'